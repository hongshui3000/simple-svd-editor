import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks';
import { number } from '@storybook/addon-knobs';
import { action } from '@storybook/addon-actions';
import * as Yup from 'yup';
import Legend from '@components/controls/Legend';
import { Button, scale } from '@scripts/gds';
import Form from '@components/controls/Form';
import Textarea from '.';

<Meta title="Controls / Form / Textarea" component={Textarea} />

# Textarea

<Story
    name="Knobs"
    args={{ minRows: 3, maxRows: 8 }}
    argTypes={{ minRows: { control: 'range' }, maxRows: { control: 'range' } }}
>
    {args => (
        <Form
            initialValues={{ textarea: '' }}
            validationSchema={Yup.object().shape({
                textarea: Yup.string().required('–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ'),
            })}
            onSubmit={action('Submit')}
            css={{ width: '25vw', minWidth: scale(40) }}
        >
            <Form.Field name="textarea">
                <Legend label="–û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π" />
                <Textarea {...args} />
            </Form.Field>
            <br />
            <Button type="submit">Submit</Button>
        </Form>
    )}
</Story>

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–ª–∞–≥–∏–Ω: [react-textarea-autosize](https://github.com/andreypopp/react-textarea-autosize).

`Textarea` - —ç—Ç–æ –Ω–µ input, –Ω–æ –ø–æ —Å—É—Ç–∏ —Ç–æ –∂–µ –ø–æ–ª–µ –≤–≤–æ–¥–∞, —Ç–∞–∫ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Form.Field`. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö —Å–º–æ—Ç—Ä–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é `Form`.

ü•á –° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è UX textarea –¥–æ–ª–∂–Ω–∞ –≤–∏–∑—É–∞–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—è —Ä–∞–∑–º–µ—Ä–∞–º–∏, –Ω–∞–º–µ–∫–∞—è –Ω–∞ —Ç–æ—Ç —Ñ–∞–∫—Ç, —á—Ç–æ –≤ —ç—Ç–æ –ø–æ–ª–µ –º–æ–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π. –¢–∞–∫ —á—Ç–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤—ã—Å—Ç–∞–≤–ª—è—Ç—å `rows`, –æ—Ç–ª–∏—á–Ω—ã–π –æ—Ç 1. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã—Å—Ç–∞–≤–ª–µ–Ω 3.

ü•á –ü—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ textarea –æ–¥–∏–Ω –∏–∑ –≤–∞–∂–Ω—ã—Ö –≤–æ–∑–Ω–∏–∫–∞—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ - —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–∏–º–≤–æ–ª–æ–≤. –ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–¥—Ö–æ–¥–æ–≤, –Ω–æ —Å–∞–º—ã–º –ª—É—á—à–∏–º —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–≤–æ–¥ –æ—Å—Ç–∞–≤—à–µ–≥–æ—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–∏–º–≤–æ–ª–æ–≤ –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ –≥—Ä–∞–Ω–∏—Ü–µ - –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 10% —Å–Ω–∏–∑—É —Å–ø—Ä–∞–≤–∞ –≤—ã–≤–æ–¥–∏—Ç—Å—è 480/500. –ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã —Ç–µ–∫—Å—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≤–≤–æ–¥–∏—Ç—å—Å—è, –Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–æ–ª–µ–µ —è–≤–Ω—ã–º (–≤ —Ç.—á. —á–µ—Ä–µ–∑ live regions –¥–ª—è AT), –∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –¥–∞—ë—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–∞–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

## Props

<ArgsTable />

## Use cases

### Basic

<Canvas>
    <Story name="Basic">
        <Form
            initialValues={{ textarea: '' }}
            validationSchema={Yup.object().shape({
                textarea: Yup.string().required('–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ'),
            })}
            onSubmit={action('Submit')}
            css={{ width: '25vw', minWidth: scale(40) }}
        >
            <Form.Field name="textarea">
                <Legend label="–û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π" />
                <Textarea />
            </Form.Field>
            <br />
            <Button type="submit">Submit</Button>
        </Form>
    </Story>
</Canvas>

### MaxLength

<Canvas>
    <Story name="MaxLength">
        {() => {
            const initialValues = {
                textareaMax: '',
            };
            const maxLength = number('maxLength', 200, { min: 1 }, 'Props');
            const threshold = number('threshold', 0, { min: 0, max: 100 }, 'Props');
            const validationSchema = Yup.object().shape({
                textareaMax: Yup.string().max(maxLength, '–ü—Ä–µ–≤—ã—à–µ–Ω–æ –∫–æ–ª-–≤–æ —Å–∏–º–≤–æ–ª–æ–≤').required('–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ'),
            });
            return (
                <Form
                    initialValues={initialValues}
                    validationSchema={validationSchema}
                    onSubmit={action('Submit')}
                    style={{ width: '25vw', minWidth: '320px' }}
                >
                    <Form.Field name="textareaMax">
                        <Legend label="–û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π" />
                        <Textarea maxLength={maxLength} threshold={threshold} />
                    </Form.Field>
                    <br />
                    <Button type="submit">Submit</Button>
                </Form>
            );
        }}
    </Story>
</Canvas>

### MaxLength w/o Form

<Canvas>
    <Story name="Max Length without form">
        {() => {
            const maxLength = number('maxLength', 200, { min: 1 }, 'Props');
            const threshold = number('threshold', 50, { min: 0, max: 100 }, 'Props');
            return (
                <div style={{ display: 'flex', flexDirection: 'column', minWidth: '320px' }}>
                    <Legend name="max" label="–û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π" />
                    <Textarea id="max" maxLength={maxLength} threshold={threshold} />
                </div>
            );
        }}
    </Story>
</Canvas>
